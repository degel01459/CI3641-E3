# Ejercicio 1

**Autor:** Kevin Briceño (15-11661)

Tomando en cuenta las definiciones de $X$, $Y$ y $Z$ planteadas en los párrafos de introducción del examen, considere las siguientes definiciones de variables:

* $L_1 = \min(X,Y)$; $U_1 = \max(X,Y)+1$
* $L_2 = \min(X,Z)$; $U_2 = \max(X,Z)+1$
* $L_3 = \min(Y,Z)$; $U_3 = \max(Y,Z)+1$

Los índices se calculan mediante división entera:

* $I = [(L1+U1)/2]$
* $J = [(L2+U2)/2]$
* $K = [(L3+U3)/2]$

Considere también la siguiente declaración:

`M :array [L1..U1] of array [L2..U2] of array [L3..U3] of T`

Suponiendo que $M$ inicia en la dirección cero ($B=0$) y que el tamaño del tipo $T$ es cuatro ($S=4$), se desea calcular las direcciones bajo diferentes esquemas de memoria.

## Resolución del Ejercicio 1

### 1. Definición de Constantes y Rangos

Basado en las constantes del carnet: $X = 6, Y = 6, Z = 1$.

**Dimensión 1 (L1..U1):**

* $L_1 = \min(6,6) = 6$
* $U_1 = \max(6,6)+1 = 7$
* $N_1$ (Tamaño) $= 7 - 6 + 1 = \mathbf{2}$

**Dimensión 2 (L2..U2):**

* $L_2 = \min(6,1) = 1$
* $U_2 = \max(6,1)+1 = 7$
* $N_2$ (Tamaño) $= 7 - 1 + 1 = \mathbf{7}$

**Dimensión 3 (L3..U3):**

* $L_3 = \min(6,1) = 1$
* $U_3 = \max(6,1)+1 = 7$
* $N_3$ (Tamaño) $= 7 - 1 + 1 = \mathbf{7}$

**Índices Solicitados:**

* $I = [(6+7)/2] = [6.5] = \mathbf{6}$
* $J = [(1+7)/2] = [4] = \mathbf{4}$
* $K = [(1+7)/2] = [4] = \mathbf{4}$

**Datos de Memoria:**

* Dirección Base ($B$) = 0
* Tamaño de $T$ ($S$) = 4 bytes
* Acceso a: `M[6][4][4]`

### (a) Cálculo en Row-Major (Orden por Filas)

En el esquema *Row-Major*, los elementos de una fila se almacenan contiguos en memoria. Esto significa que **el último subíndice varía más rápido**.

Para llegar al elemento $M[i][j][k]$, debemos saltar todos los "planos" completos anteriores a $i$ y todas las "filas" completas anteriores a $j$ dentro de ese plano.

**Cálculo:**
La fórmula de dirección lineal es:

$Direccion = B + S \times [ (i - L_1) \times N_2 \times N_3 + (j - L_2) \times N_3 + (k - L_3) ]$

1. **Desplazamiento por Planos ($i$):**
    $(6 - 6) \times 7 \times 7 = 0$

2. **Desplazamiento por Filas ($j$):**
    $(4 - 1) \times 7 = 3 \times 7 = 21$

3. **Desplazamiento por Columnas ($k$):**
    $(4 - 1) = 3$

* **Desplazamiento Total:** $0 + 21 + 3 = 24$ elementos.
* **Dirección Final:** $0 + (24 \times 4) = \mathbf{96}$.

### (b) Cálculo en Column-Major (Orden por Columnas)

En el esquema *Column-Major*, los elementos de una columna son contiguos. Aquí, **el primer subíndice varía más rápido**.

Físicamente, esto significa que `M[1][1][1]` está seguido inmediatamente por `M[2][1][1]`, no por `M[1][2][1]`. Por tanto, el "peso" o *stride* de los índices se invierte respecto a row-major.

**Cálculo:**
La fórmula cambia los pesos de las dimensiones:
$Direccion = B + S \times [ (i - L_1) + (j - L_2) \times N_1 + (k - L_3) \times N_1 \times N_2 ]$

1. **Desplazamiento Dimensión 1 ($i$):**
    $(6 - 6) = 0$ (Es contiguo, peso 1).
2. **Desplazamiento Dimensión 2 ($j$):**
    $(4 - 1) \times N_1 = 3 \times 2 = 6$
3. **Desplazamiento Dimensión 3 ($k$):**
    $(4 - 1) \times N_1 \times N_2 = 3 \times (2 \times 7) = 3 \times 14 = 42$

* **Desplazamiento Total:** $0 + 6 + 42 = 48$ elementos.
* **Dirección Final:** $0 + (48 \times 4) = \mathbf{192}$.
